<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 4
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Dribbble: www.dribbble.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
Renew Support: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<html lang="en">
<!-- begin::Head -->
<head>
    <meta charset="utf-8"/>
    <title>
        Metronic | Events
    </title>
    <meta name="description" content="Api events examples">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--begin::Web font -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script id="sap-ui-bootstrap"
            src="https://sapui5.netweaver.ondemand.com/resources/sap-ui-core.js"
            data-sap-ui-libs="sap.m"
            data-sap-ui-theme="sap_belize"
            data-sap-ui-xx-bindingSyntax="complex"
            data-sap-ui-compatVersion="edge">
    </script>
    <script>
        WebFont.load({
            google: {"families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"]},
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>
    <!--end::Web font -->
    <!--begin::Base Styles -->
    <link href="assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css"/>
    <link href="assets/app/default/base/style.bundle.css" rel="stylesheet" type="text/css"/>
    <!--end::Base Styles -->
    <link rel="shortcut icon" href="../../../assets/demo/default/media/img/logo/favicon.ico"/>
</head>
<script>
    var workcenterType = 'MODLING';
    $(function () {
        var aa = [
            {
                ID: "2",
                OrderNumber: "000001011520",
                Material: "000000004600293048",
                Quantity: "100",
                SchedFinish: "2018-06-28 16:57:00",
                SchedStart: "2018-06-28 16:37:56",
                Sort: "MOLDING",
                Status: "U",
                WCG: "MOLD3"
            },
            {
                ID: "12",
                OrderNumber: "000001011238",
                Material: "000000002931555000",
                Quantity: "205",
                SchedFinish: "2018-04-05 17:00:00",
                SchedStart: "2018-04-05 11:45:00",
                Sort: "MOLDING",
                Status: "S",
                WCG: "MOLD3"
            },
            {
                ID: "19",
                OrderNumber: "000001011241",
                Material: "000000004600280000",
                Quantity: "203",
                SchedFinish: "2018-04-05 15:15:00",
                SchedStart: "2018-04-05 14:15:00",
                Sort: "MOLDING",
                Status: "S",
                WCG: "MOLD3"
            },
        ];

        orderTableCreat(aa);
        eventsCapture();
    });

    var orderTableCreat = function (rows) {
        // cc('rows');
        // cc(rows);
//            if (0 !== $("#m_datatable_latest_orders").length)


        orderTable = $(".m_datatable").mDatatable({
            drawCallback: function () {
                // cc('mDatatable drawCallback');
            },
            responsive: true,
            data: {
                type: "local",
                source: rows,
                // pageSize: 10
            },
            layout: {
                theme: "default",
                class: '',
                scroll: false,
                // height: 500,
                footer: false
            },
            sortable: true,
            pagination: true,
            search: {input: $("#generalSearch")},
            columns: [
                // {
                //
                //     field: "checkBox",
                //     title: "#",
                //     sortable: false,
                //     filterable: false,
                //     width: 20,
                //     textAlign: "center",
                //     selector: {class: "m-checkbox--solid m-checkbox--brand"},
                //     template: function (e) {
                //     }
                // },
                {
                    field: "ID",
                    title: "#",
                    sortable: false, // disable sort for this column
                    width: 40,
                    selector: {class: 'm-checkbox--solid m-checkbox--brand'}
                },


                {
                    field: "Status",
                    title: "Status",
                    width: 100,
                    sortable: false,
                    filterable: false,
                    template: function (e) {
                        var t = {
                            'U': {title: "Unscheduled", class: "m-badge--brand"},
                            'S': {title: "Scheduled", class: " m-badge--success"},
                            'H': {title: "Hold", class: " m-badge--warning"},
                            'C': {title: "Cancelled", class: " m-badge--metal"},
                            // 'N': {title: "No Material", class: " m-badge--warning"},
                            // 6: {title: "Urgent", class: " m-badge--danger"},
                            // 7: {title: "Delayed", class: " m-badge--info"}
                        };
                        return '<span class="m-badge ' + t[e.Status].class + ' m-badge--wide">' + t[e.Status].title + "</span>"
                    },
                },

                // {
                //
                //     field: "ID",
                //     title: "ID",
                //     sortable: 'asc',
                //     filterable: true,
                //     // visible: true,
                //     width: 100,
                // },

                {
                    field: "OrderNumber",
                    title: "Order #",
                    sortable: true,
                    filterable: true,
                    width: 100,
//                            template: "{{OrderID}} - {{ShipCountry}}"
                },

                {
                    field: "Material",
                    title: "Material #",
                    sortable: true,
                    filterable: false,
                    width: 160,
//                            template: "{{OrderID}} - {{ShipCountry}}"
                },

                {
                    field: "Quantity",
                    title: "Quantity",
                    width: 65,
                    sortable: false,
                    filterable: false,
                    // visible: 0,
//                            responsive: {visible: "lg"}
                },

                {
                    field: "SchedStart",
                    title: "SchedStart",
                    width: 140,
                    sortable: true,
                    filterable: false,
//                            responsive: {visible: "lg"}
                },
                // {
                //     field: "StartTime",
                //     title: "StartTime",
                //     width: 80,
                //     // responsive: {visible: "sm"}
                // },
                {
                    field: "SchedFinish",
                    title: "SchedFinish",
                    width: 140,
                    sortable: false,
                    filterable: false,
                },
                // {
                //     field: "EndTime",
                //     title: "EndTime",
                //     width: 80,
                // },
                {
                    field: "WCG",
                    title: "Group",
                    width: 70,
                    sortable: false,
                    filterable: false,
                },
                {
                    field: "Mold",
                    title: "Mold",
                    width: 70,
                    sortable: true,
                    filterable: false,
                },
                {
                    field: "Press",
                    title: "WorkCenter",
                    width: 90,
                    sortable: true,
                    filterable: false,
                },
                {
                    field: "CtrlKey",
                    title: "CtrlKey",
                    width: 40,
                    sortable: false,
                    filterable: false,
                },
                // {
                //     field: "Actions",
                //     width: 80,
                //     title: "Actions",
                //     sortable: !1,
                //     overflow: "visible",
                //     template: function (e) {
                //         // cc('Actions==>');
                //         // cc(e);
                //         // cc('<=Actions');
                //         if (e.Status == 'U' || e.Status == 'S') {    //Unscheduled & Scheduled
                //
                //             var wcg = '';
                //             var wcgNAME = '';
                //             for (var f in MESM_FloorMaps) {
                //                 if (e.WCG == MESM_FloorMaps[f].unitName) {
                //                     wcg = MESM_FloorMaps[f].recordID;
                //                     wcgNAME = MESM_FloorMaps[f].unitName;
                //                     break;
                //                     // n = MESM_FloorMaps.length;
                //                 }
                //             }
                //             // var prs = [];
                //             var prsSTR = '';
                //             var groupSTR = '';
                //             var prsRows = 0;
                //             if (e.Sort == 'MOLDING') {
                //                 for (var f in MESM_FloorMaps) {
                //                     if (MESM_FloorMaps[f].idUnitParent == wcg) {
                //                         if (mmmArray[e.Mold] != null && mmmArray[e.Mold].indexOf(MESM_FloorMaps[f].MOLD_Machine_Matrix) > 0 && MESM_FloorMaps[f].unitName != e.Press) {
                //                             // prs.push({
                //                             //     'unitName': MESM_FloorMaps[f].unitName,
                //                             //     'MOLD_Machine_Matrix': MESM_FloorMaps[f].MOLD_Machine_Matrix
                //                             // });
                //                             prsSTR += '<a class="dropdown-item" onclick="quickAction(this)" id=' +
                //                                 '"' +
                //                                 wcgNAME +
                //                                 '_' +
                //                                 MESM_FloorMaps[f].unitName +
                //                                 '"' +
                //                                 '><i class="la la-wrench"></i>' +
                //                                 'assign to ' + MESM_FloorMaps[f].unitName +
                //                                 // ' ~' + Math.round(0.5 + e.Quantity / MOLD_Master_Tool_List[e.Mold] / 15) * 15 + 'min' +
                //                                 '</a>';
                //                             prsRows++;
                //                         } else {
                //                             // cc(MESM_FloorMaps[f].MOLD_Machine_Matrix);
                //                             // cc(mmmArray[e.Mold]);
                //                             // cc(MESM_FloorMaps[f].unitName + ' false');
                //                         }
                //                     }
                //                 }
                //
                //                 // groupSTR = '<div class="dropdown-divider"></div>';
                //                 for (var i = 1; i <= 6; i++) {
                //                     if (e.WCG.indexOf(i) > 0) {
                //                         groupSTR =
                //                             groupSTR +
                //                             '<a class="dropdown-item" onclick="quickAction(this)"><i class="la la-wrench"></i>MOLD' +
                //                             i + ' *' +
                //                             '</a>';
                //                     } else {
                //                         groupSTR =
                //                             groupSTR +
                //                             '<a class="dropdown-item" onclick="quickAction(this)"><i class="la la-wrench"></i>MOLD' +
                //                             i +
                //                             '</a>'
                //                     }
                //
                //                 }
                //                 // cc('prsSTR ==>' + prsSTR);
                //                 if (prsSTR.length != 0) {
                //                     prsSTR = prsSTR + '<div class="dropdown-divider"></div>'
                //                 }
                //                 var scrollSTR = '';
                //                 if (e.Status == 'U') {
                //                     if (prsRows * 40 + 250 > 500) {
                //                         scrollSTR = 'style="overflow-y: scroll; height: 500px"'
                //                     }
                //                 } else if (e.Status == 'S') {
                //                     if (prsRows * 40 + 280 > 500) {
                //                         scrollSTR = 'style="overflow-y: scroll; height: 500px"'
                //                     }
                //                 }
                //             } else if (e.Sort == 'RESIN') {
                //                 prsSTR =
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="RESIN_BLEND01"><i class="la la-wrench"></i>assign to BLEND01' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="RESIN_BLEND02"><i class="la la-wrench"></i>assign to BLEND02' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="RESIN_BLEND03"><i class="la la-wrench"></i>assign to BLEND03' + '</a>';
                //             } else if (e.Sort == 'PACKING') {
                //                 prsSTR =
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK01"><i class="la la-wrench"></i>assign to PACK01' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK02"><i class="la la-wrench"></i>assign to PACK02' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK03"><i class="la la-wrench"></i>assign to PACK03' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK04"><i class="la la-wrench"></i>assign to PACK04' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK05"><i class="la la-wrench"></i>assign to PACK05' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK06"><i class="la la-wrench"></i>assign to PACK06' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK07"><i class="la la-wrench"></i>assign to PACK07' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK08"><i class="la la-wrench"></i>assign to PACK08' + '</a>' +
                //                     '<a class="dropdown-item" onclick="quickAction(this)" id="PACKING_PACK09"><i class="la la-wrench"></i>assign to PACK09' + '</a>';
                //             }
                //
                //             var ft = '';
                //             if (prsSTR.length == 0) {
                //                 // ft = 'WrongGroup'
                //             }
                //
                //             if (e.Sort == 'ASSY') {
                //                 return '';
                //             } else
                //                 return e.Status == 'U' ?
                //
                //
                //                     // '<div class="dropdown ' + (e.getDatatable().getPageSize() - e.getIndex() <= 4 ? "dropup" : "") + '">' +
                //                     '<div class="dropdown ' + '">' +
                //                     // '<div class="dropup ' + "" + '">' +
                //                     '       <a href="#" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">' +
                //                     '           <i class="la la-ellipsis-h"></i></a>' +
                //                     '       <div class="dropdown-menu dropdown-menu-right"' +
                //                     scrollSTR +
                //                     '>' +
                //                     prsSTR +
                //                     groupSTR +
                //
                //                     // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-times-circle"></i>' +
                //                     // ft +
                //                     '</a>' +
                //                     '       </div>' +
                //                     '   </div>' +
                //                     '   <a href="#basic" data-toggle="" onclick="sendMSG(this)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="Report">' +
                //                     '       <i class="la la-comment"></i></a>'
                //                     :
                //                     '<div class="dropdown ' + '">' +
                //                     '       <a href="#" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">' +
                //                     '           <i class="la la-ellipsis-h"></i>' +
                //                     '       </a>' +
                //                     '       <div class="dropdown-menu dropdown-menu-right" ' +
                //                     scrollSTR +
                //                     '>' +
                //                     // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-cogs"></i>AutoM</a>' +
                //                     prsSTR +
                //                     groupSTR +
                //                     '           <div class="dropdown-divider"></div>' +
                //                     // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-check-circle"></i>Scheduled</a>' +
                //                     '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-times-circle"></i>Unscheduled</a>' +
                //                     '       </div>' +
                //                     '   </div>' +
                //                     '   <a href="#basic" data-toggle="" onclick="sendMSG(this)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="Report">' +
                //                     '       <i class="la la-comment"></i>' +
                //                     '   </a>'
                //
                //         } else if (e.Status == 'H') {
                //             return '<div class="dropdown ' + (e.getDatatable().getPageSize() - e.getIndex() <= 4 ? "dropup" : "") + '">' +
                //                 '       <a href="#draggable" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">' +
                //                 '           <i class="la la-ellipsis-h"></i>' +
                //                 '       </a>' +
                //                 '       <div class="dropdown-menu dropdown-menu-right">' +
                //                 // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-edit" "></i>Action I</a>' +
                //                 // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-leaf"></i>Action II</a>' +
                //                 '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-info-circle"></i>Hold</a>' +
                //                 '       </div>' +
                //                 '   </div>' +
                //                 '   <a href="#basic" data-toggle="" onclick="sendMSG(this)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="Report">' +
                //                 '       <i class="la la-comment"></i>' +
                //                 '   </a>';
                //         } else if (e.Status == 'C') {
                //             return '<div class="dropdown ' + (e.getDatatable().getPageSize() - e.getIndex() <= 4 ? "dropup" : "") + '">' +
                //                 '       <a href="#draggable" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">' +
                //                 '           <i class="la la-ellipsis-h"></i>' +
                //                 '       </a>' +
                //                 '       <div class="dropdown-menu dropdown-menu-right">' +
                //                 // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-edit" "></i>Action I</a>' +
                //                 // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-leaf"></i>Action II</a>' +
                //                 '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-info-circle"></i>Order canceled</a>' +
                //                 '       </div>' +
                //                 '   </div>' +
                //                 '   <a href="#basic" data-toggle="" onclick="sendMSG(this)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="Report">' +
                //                 '       <i class="la la-comment"></i>' +
                //                 '   </a>';
                //         }
                //         // else if (e.Status == 'N') {
                //         //     return '<div class="dropdown ' + (e.getDatatable().getPageSize() - e.getIndex() <= 4 ? "dropup" : "") + '">' +
                //         //         '       <a href="#draggable" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">' +
                //         //         '           <i class="la la-ellipsis-h"></i>' +
                //         //         '       </a>' +
                //         //         '       <div class="dropdown-menu dropdown-menu-right">' +
                //         //         // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-edit" "></i>Action I</a>' +
                //         //         // '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-leaf"></i>Action II</a>' +
                //         //         '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-info-circle"></i>Waiting for Material</a>' +
                //         //         '           <div class="dropdown-divider"></div>' +
                //         //         '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-times-circle"></i>Cancelled</a>' +
                //         //         '       </div>' +
                //         //         '   </div>' +
                //         //         '   <a href="#basic" data-toggle="" onclick="sendMSG(this)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="Report">' +
                //         //         '       <i class="la la-comment"></i>' +
                //         //         '   </a>';
                //         // }
                //
                //
                //     }
                // },
                // {
                //     field: "ID",
                //     title: "",
                //     width: 0,
                // },
                {
                    field: "Sort",
                    title: "",
                    visible: false,
                    width: 100,
                    sortable: false,
                    filterable: false,
                },
                {
                    field: "Operation",
                    title: "",
                    visible: false,
                    width: 100,
                    sortable: false,
                    filterable: false,
                },
            ]
        });


        // orderTable.hideColumn('ID');
        // orderTable.hideColumn('Sort');
        // orderTable.hideColumn('Operation');


        if (workcenterType == 'ASSY' || workcenterType == 'PACKING' || workcenterType == 'RESIN') {
            if (workcenterType == 'ASSY' || workcenterType == 'PACKING') {
                orderTable.hideColumn('Mold')

            }
            orderTable.hideColumn('CtrlKey');
            document.getElementById('m_form_type').innerHTML =
                '<option value=""> All</option>';
        }

        if (workcenterType == 'MOLDING') {
            document.getElementById('m_form_type').innerHTML =
                '<option value=""> All</option>\n' +
                '<option value="MOLD1">MOLD1</option>\n' +
                '<option value="MOLD2">MOLD2</option>\n' +
                '<option value="MOLD3">MOLD3</option>\n' +
                '<option value="MOLD4">MOLD4</option>\n' +
                '<option value="MOLD5">MOLD5</option>\n' +
                '<option value="MOLD6">MOLD6</option>\n' +
                '<option value="DIE CAST">DIE CAST</option>';
        }


        var i = orderTable.getDataSourceQuery();

        $("#m_form_status").on("change", function () {
            // cc();
            orderTable.search($(this).val(), "Status");
            // cc('m_form_status');
            // cc($(this).val());
        }).val(void "" !== i.Status ? i.Status : "");

        $("#m_form_type").on("change", function () {
//                cc(i);
//                cc(($(this).val()));
            orderTable.search($(this).val(), "WCG");
//                cc(aa);
        }).val(void 0 !== i.WCG ? i.WCG : "");

        $("#m_form_status, #m_form_type").selectpicker();
    };
</script>
<!-- end::Head -->
<!-- end::Body -->
<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">
<!-- begin:: Page -->
<div class="m_datatable" id="api_events"></div>


</div>

<!--begin::Base Scripts -->
<script src="assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
<script src="assets/app/default/base/scripts.bundle.js" type="text/javascript"></script>
<!--end::Base Scripts -->
<!--begin::Page Resources -->
<script src="events.js" type="text/javascript"></script>
<!--end::Page Resources -->
</body>
<!-- end::Body -->
</html>
