<!DOCTYPE HTML>

<html>

<head>

    <meta http-equiv="X-UA-Compatible" content="IE=11;no-cache"/>
    <meta charset="UTF-8"/>
    <title>Hunter Douglas</title>

    <link rel="stylesheet" type="text/css" href="css/default.css"></link>

    <style>

        #header {
            position: absolute;
            top: 5px;
            left: 30px;
            width: 95%;
            height: 10%;
            padding-left: 5px;
        / / opacity: 0.9;
        / / background-image: url('Common/img/asset2c.png');
        }

        #top_navigation {
            position: absolute;
            top: 95px;
            left: 30px;
            width: 95%;
            height: 15%;
            padding-left: 5px;
            padding-top: 10px;
        }

        #main_content {
            position: absolute;
            width: 95%;
            height: 65%;
            top: 145px;
            left: 30px;
        }

        #app_title {
            width: 95%;
            text-align: center;
            font-family: "Arial Black", Arial, Helvetica, sans-serif;
            font-size: 32px;
            color: #007dc0;
        }

        #page_title {
            position: absolute;
            top: 85px;
            width: 400px;
            text-align: center;
            font-family: "Arial Black", Arial, Helvetica, sans-serif;
            font-size: 62px;
            color: #cfcfcf;
        }

        #TV-MachineName {
            text-align: left;
            font-family: "Arial Black", Arial, Helvetica, sans-serif;
            font-size: 28px;
            color: #007dc0;
        }

        #TV-MachineID {
            text-align: left;
            font-family: "Arial Black", Arial, Helvetica, sans-serif;
            font-size: 62px;
            color: #cfcfcf;
        }

        /****** OVERLAYS ******************/

        #MatrixWCBC {
            margin: 10px auto;
        }

        #L-WCBC {
            margin-top: 15px;
            padding: 5px;
            font-family: "Arial Black", Arial, Helvetica, sans-serif;
            font-size: 32px;
            height: 35px;
        / / color: #007dc0;
        }

        /*  LOGON */

        #L-ClockID {
            font-family: "Lucida Grande", Tahoma;
            font-size: 9px;
            font-weight: lighter;
            font-variant: normal;
            text-transform: uppercase;
            color: #666666;
            margin-top: 10px;
            padding-left: 10px;
            letter-spacing: 0.2em;
        }

        #TF-WCBC {
            font-size: 24px;
            height: 45px;
            font-weight: bold;
            text-align: center;
        }

        #BT-WCBC {
            font-weight: bold;
            font-size: 14px;
        }

        /* login */

        #__cell0, #__cell1, #__cell3 {
            text-align: center;
            height: 36px;
        }


    </style>

    <script
            id="sap-ui-bootstrap"
            src="/sapui5/resources/sap-ui-core.js"
            data-sap-ui-theme="sap_goldreflection"
            data-sap-ui-xx-bindingSyntax="complex"
            data-sap-ui-libs="sap.ui.core,sap.ui.commons,sap.ui.table,sap.ui.ux3,sap.m"
            data-sap-ui-language="en">
    </script>

    <script type="text/javascript" src="Common/js/default.js"></script>

    <link rel="stylesheet" type="text/css" href="Common/css/keyboard.css">
    <script type="text/javascript" src="Common/js/jquery.keyboard.js"></script>

    <script>

        //----------------GLOBAL VARIABLES--------------------------------

        var oCore = sap.ui.getCore();


        // -----------------	LOAD	------------------------

        function roleSecurity() {
            doOpenWCBC();
        }


        //----------HEADER MATRIX ------------

        var oMatrixHeader = new sap.ui.commons.layout.MatrixLayout({
            id: 'matrixHeader',
            layoutFixed: true,
            width: '100%',
            height: '95px',
            columns: 2,
            widths: ['60%', '40%']
        });

        var oTV_MachineName = new sap.ui.commons.TextView({
            id: 'TV-MachineName',
            text: 'STATION',
            textAlign: 'Begin',
            width: '90%'
        });


        //-----------	PAGE TITLE	--------------------------

        var oTV_MachineID = new sap.ui.commons.TextView({
            id: 'TV-MachineID',
            text: ' ',
            textAlign: 'Begin',
            width: '90%'
        });

        oTV_MachineID.placeAt("page_title");

        //------------ MAIN MATRIX-----------------

        var oMatrixMain = new sap.ui.commons.layout.MatrixLayout({
            id: 'matrixMain',
            layoutFixed: true,
            width: '100%',
            height: '85px',
            columns: 3,
            padding: '55px',
            widths: ['30%', '58%', '12%']
        });


        //-------ORDER (MAIN SUB) MATRIX-----------------

        //----- RUNTIME (MAIN SUB ) MATRIX-----------------

        //------------ BOTTOM BUTTONS MATRIX (RUNTIME SUB MATRIX)-----------------

        //--------- SIDE BUTTONS (SUB) MATRIX-----------------


        // ***********	OVERLAYS	***************************************************************************************

        // ********* 	SCAN WORKCENTER BARCODE  OVERLAY	***************************************************************************************

        var oMatrixWCBC = new sap.ui.commons.layout.MatrixLayout({
            id: 'MatrixWCBC',
            layoutFixed: true,
            width: '610px',
            columns: 1,
            widths: ['600px']
        });

        var oTitleWCBC = new sap.ui.commons.Label({
            id: 'L-WCBC',
            text: 'SCAN WORKSTATION BARCODE'
        });

        oMatrixWCBC.createRow(oTitleWCBC);


        var oTF_WCBC = new sap.ui.commons.TextField({
            id: 'TF-WCBC',
            tooltip: 'SCAN WORKSTATION BARCODE',
            editable: true,
            maxLength: 20,
            visible: true,
            width: '180px'
        });
        oTF_WCBC.addEventDelegate({
            onAfterRendering: function () {
                $('#TF-WCBC').keyboard({
                    //layout : 'num',
                    restrictInput: true,
                    preventPaste: true,
                    autoAccept: true
                });
            }
        });


        oMatrixWCBC.createRow(oTF_WCBC);

        oMatrixWCBC.createRow('');

        var oBT_SubmitWCBC = new sap.ui.commons.Button({
            text: "SUBMIT",
            id: "BT-SubmitWCBC",
            width: "120px",
            height: "70px",
            // press : function() {},
        })
        oBT_SubmitWCBC.attachPress(doSubmitWCBC);

        oMatrixWCBC.createRow(oBT_SubmitWCBC);

        var oOverlayContainerWCBC = new sap.ui.ux3.OverlayDialog({openButtonVisible: false});
        oOverlayContainerWCBC.setHeight('300px');
        oOverlayContainerWCBC.setWidth('630px');
        oOverlayContainerWCBC.addContent(oMatrixWCBC);

        //**********************************************************

        function doOpenWCBC() {
            oOverlayContainerWCBC.open();
        }


        function doSubmitWCBC() {
            var timestamp = new Date().getTime();

            //	var Param1 = escapeSQLString(oCore.byId("TF-WCBC").getValue());

            var Param1 = escapeSQLString($('#TF-WCBC').val());

            var paramStr = "Param.1=" + encodeURIComponent(Param1);
            var queryStr = "/XMII/Illuminator?QueryTemplate=OneHDMIIOwensboro/STATIONS_HMI/QUERIES/GetWorkstationByBarcode&" + paramStr + "&ts=" + timestamp + "&Content-Type=text/xml";
            // alert(queryStr);
            getData(queryStr, parseJsonScanWorkstationBarcode);
        }

        function parseJsonScanWorkstationBarcode(jasondata) {
            // alert(jasondata.length);
            if (jasondata.length > 0) {
                // alert(jasondata.length);
                for (var i = 0; i < jasondata.length; i++) {
                    var recordID = (jasondata[i]['recordID']);
                    var unitName = (jasondata[i]['unitName']);
                    unitName = unitName.substring(0, 4);
                    // alert(unitName)
                    switch (unitName) {
                        case "PRES" :
                            window.location.href = "MoldingDashBoard.irpt?UNITID=" + recordID;
                            break;
                        case "ASSY" :
                            window.location.href = "AssemblyDashBoard.irpt?UNITID=" + recordID;
                            break;
                        case "PACK" :
                            window.location.href = "Weigh-up.irpt?UNITID=" + recordID;
                            break;
                        case "BLEN" :
                            window.location.href = "ResinBlend.irpt?UNITID=" + recordID;
                            break;
                        default  :
                            break;
                    }


                }
            } else {

            }
        }

        // ********* 	ORDER LIST  OVERLAY	***********************************************

        // ***************	CAVITATION  OVERLAY	******************************************

        // *********	MOLD HISTORY  OVERLAY	(INSPECTION) *******************************

        // *********	DOWNTIME  OVERLAY	*****************************************************

        // ***************	SCRAP  OVERLAY	******************************************************

        // ***************	COMPONENTS  OVERLAY	****************************

        // *********  INSPECTION  OVERLAY	*******************************************

        // ********* 	LABEL  OVERLAY	****************************************************************


    </script>

</head>

<body onLoad="roleSecurity()">


<div id="header">
    <div id="app_title"></div>
    <div id="page_title"></div>
</div>

<div id="top_navigation"></div>

<div id="main_content"></div>

</body>

</html>